SAT is NP complete, since we know from Cook-Levin theorem.
We reduce SAT to a subset of it, 3-CNF-SAT, and we use that for proving that everything else is in NP too.

## 3-CNF-SAT

Handling all the forms of the formulas in SAT problem is hard, in practice.
To simplify this, we only input formulas in [[CNF]] (Conjunctive Normal Forms).

> [!hint]
> It's called 3-CNF because each clause has 3 literals.

The cool thing of CNF is that for it to be satisfiable, at least one literal in each clause is 1. Even though if this simplifies stuff, it is still NP-Complete.
3-CNF is the last model for which it is still NP-Complete (2-CNF is polynomial)

### How to

We want a polynomial function that turns a formula into a CNF formula, such that if the result is satisfiable, the original formula is also satisfiable.

Binary parse tree = internal nodes are logical operators, leaves are variables.
For every internal node, i introduce a new variable called y for the output of each node.

We get the truth table of each node, and we convert the truth table to CNF.

If we have only 2 literals for a clause, create arbitrary variables p and p negated, and make 2 3-literals clauses.
If we have only 1 literals for a clause, create 2 arbitrary variables, and convert to 4 clauses with all the combination.

## CLIQUE

Basically a clique is a set of vertices in a graph such that all the vertices inside of the set are connected.
They can be of different sizes, every edge is a clique of size 2.

The certificate is the proposed clique. Check that every vertex belongs to the graph, check that clique has correct size, check that every edge that you find is in the set of edges.

We can show that 3-CNF-SAT reduces to clique ($\text{3-CNF-SAT} \leq_P \text{CLIQUE}$).

(G, k) with k as the number of clauses in my formulas.
We need to find formulas that are satisfiable if and only if bla bla bla

### How to convert (30)

#### from sat to clique

For every clause and for every literal of a clause, i add some nodes.

Imagine we have a graph, and for each clause we have a triplet of nodes (literals), basically one vertex for every literal.
I will put an edge between every pair of literals that are from different clauses, but are not complements of each other.

This formula is satisfiable if and only if we have a clique of size 3 in this graph.

Assume that the formula is satisfiable. Since it is in CNF, every clause has at least one literal that is 1. 
For every clause, we choose one literal that is 1. This corresponds to a set of vertices in my graph with exactly size k. Then we claim that these k nodes are all pairwise connected.

Basically this construction makes it so that if the formula is satisfiable, then we have a clique of size k.

#### from clique to sat

Suppose that the graph has a clique of size k.

## VERTEX-COVER

A vertex cover is a set of vertices that is connected to all leaves in the graph. We want to find the smallest vertex-cover, the smallest number of nodes that can cover all the graph.

We can convert this to a decision problem: does this graph have a vertex cover of size k?

### Reduction from CLIQUE

I want to invent a new graph such that G has a clique of size k if and only if G' has a vertex cover of size k'.

G' will be the complement of G. Same vertices, but with edges where the original graph doesn't have edges.

G has a clique of size k, if and only if the complement of G has a vertex cover of size |V| - k.

Imagine that G has a clique of size V' of size k.
We claim that V\V' is a vertex cover for G.
Why?
Let {u,v} be any edge in the complement of E, so it was not in E to begin with.
I fix an edge in the complement graph, and since this edge is not present in the original graph, at least one of them will be outside the clique.

Now the other side.
We take a pair of vertices that do not belong to V'. 
He's speaking too much symbols, i am not understanding.

## HAM-PATH

### Conversion from 3-CNF-SAT (30 e lode)

The idea is that we have some way to represent this formula as a graph.
We represent each variable as a double way linked chain on k nodes (k = number of clauses).

We interconnect each edge of the row with another external vertex (above and below each row).
The extremes of the row are only there to make the graph...

There are 2 nodes that speak about the presence of a variable in a clause, then a separator, then again 2 nodes, then separator, and so on.

SEPARATOR | NODE IN A CLAUSE | SEPARATOR | NODE IN A CLAUSE

Suppose $c_j$ is a clause.
We have an external node $c_j$, and for each pair of nodes (that are not separators), we put edges that go to or from this external node $c_j$. 
- If the variable is not negated inside the clause $c_j$, we go from the left node and we come back from $c_j$ in the right node
- If the variable is negated inside $c_j$, we go from the right node to $c_j$, and we come back to the left node.

> [!hint]
> It's not strictly required to have 3k+3, you can have 2k+2, but then it's more difficult...?


Now we have to prove that once we have a satisfiable assignment for a formula, we should be able to find an hamiltonian path.
Conversely, from an hamiltonian path, we should be able to recover an assignment that is satisfiable for a formula.

## Undirected HAM-PATH

Edges are not pairs of vertices (ordered), they are just subsets of vertices now.
We want to prove this is in NPC aswell.

Assume we have a directed graph G with n vertices, i want to build an undirected graph G', such that G is hamiltonian if and only if G' is hamiltonian.

I split every node in G in 3 new chained nodes in G'.
Then for every original edge in my graph, i add an edge between the third new vertex of each chain to the first vertex of the next node in the original graph

![[photo_2025-11-26_09-00-29.jpg]]

The only possibility is:
- visiting a triple
- moving to another triple (if we go back it's not hamiltonian anymore)

> [!hint]
> We can't duplicate the vertices, we must triplicate them. Because then the iff wouldn't hold.
