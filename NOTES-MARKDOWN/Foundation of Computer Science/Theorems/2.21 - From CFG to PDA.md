In this proof we show how to convert a [[6. Context-Free Grammars|Context-Free grammar]] into an equivalent [[7. PDA|PDA]] that accepts the language.

> [!cite] Derivation meaning
> A derivation is simply the sequence of substitutions made as a grammar generates a string.
> Each step of the derivation yields an intermediate string of variables and terminals.


Let $G$ be a CFG.
Assume we have a PDA which accepts any $w$ (generated by G), but only if there exists a derivation from the start variable (basically an empty string) to $w$.

> [!hint] How do you figure out which path to take at each step of the derivation?
> You don't.
> A PDA works like an [[2. Finite Automata|NFA]], which takes every single possible path and accepts the string if even one path finishes in a finish state.


The PDA starts with the start variable in its stack.

![[Pasted image 20250817120719.png]]


Then it begins popping from the stack, substituting non-determinalistically the variable that popped out and then pushing the result of the substitution.

> [!warning] What if we pop a terminal?
> - Terminals at the top of the stack will be matched to the symbols in $w$ right away by the PDA, and not pushed on the stack.
> - Variables will be popped and their substitute will be pushed onto the stack.

![[Pasted image 20250817120656.png]]


Eventually, substitution after substitution, the PDA may arrive at a string that contains only terminal symbols, meaning that it has used the grammar to derive a string.

> [!tldr]
> ![[Pasted image 20250817120828.png]]

---

## Proof

First we need to establish how to represent substitution of variables in the PDA.

$$\Large (\text{new state, substitution})\in\delta(\text{current state, input, popped symbol})$$

This is the shorthand for referring to a set of states that pop the variable and push the substitution string onto the stack:

![[Pasted image 20260111190920.png]]
![[Pasted image 20260111192401.png]]

The automaton consists of 3 steps:

![[Pasted image 20260111190254.png]]


The middle part, the loop, contains all the states from the substitution shorthands. 
We loop there when we pop a terminal (match it against $w$) or a variable, until we find $\$$, then we accept.

